{"mappings":"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","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["\"use strict\";\nfunction _array_like_to_array(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];\n    return arr2;\n}\nfunction _array_with_holes(arr) {\n    if (Array.isArray(arr)) return arr;\n}\nfunction _array_without_holes(arr) {\n    if (Array.isArray(arr)) return _array_like_to_array(arr);\n}\nfunction _class_call_check(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _create_class(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _iterable_to_array(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _iterable_to_array_limit(arr, i) {\n    var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n    if (_i == null) return;\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _s, _e;\n    try {\n        for(_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true){\n            _arr.push(_s.value);\n            if (i && _arr.length === i) break;\n        }\n    } catch (err) {\n        _d = true;\n        _e = err;\n    } finally{\n        try {\n            if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n        } finally{\n            if (_d) throw _e;\n        }\n    }\n    return _arr;\n}\nfunction _non_iterable_rest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _non_iterable_spread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _sliced_to_array(arr, i) {\n    return _array_with_holes(arr) || _iterable_to_array_limit(arr, i) || _unsupported_iterable_to_array(arr, i) || _non_iterable_rest();\n}\nfunction _to_consumable_array(arr) {\n    return _array_without_holes(arr) || _iterable_to_array(arr) || _unsupported_iterable_to_array(arr) || _non_iterable_spread();\n}\nfunction _unsupported_iterable_to_array(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _array_like_to_array(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(n);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);\n}\nvar Game = /*#__PURE__*/ function() {\n    function Game() {\n        var tableSize = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 4;\n        _class_call_check(this, Game);\n        this.tableSize = tableSize;\n        this.numberElements = [];\n        this.handleMove = this.handleMove.bind(this);\n        this.start = this.start.bind(this);\n        this.initSelectors();\n        this.initListeners();\n    }\n    _create_class(Game, [\n        {\n            key: \"initSelectors\",\n            value: function initSelectors() {\n                this.tableEl = document.querySelector(\"table\");\n                this.scoreEl = document.querySelector(\".game-score\");\n                this.messageLoseEl = document.querySelector(\".message-lose\");\n                this.messageWinEl = document.querySelector(\".message-win\");\n                this.messageStartEl = document.querySelector(\".message-start\");\n                this.startButtonEl = document.querySelector(\".button\");\n            }\n        },\n        {\n            key: \"initListeners\",\n            value: function initListeners() {\n                window.addEventListener(\"keyup\", this.handleMove);\n                this.startButtonEl.addEventListener(\"click\", this.start);\n            }\n        },\n        {\n            key: \"init\",\n            value: function init() {\n                for(var y = 0; y < this.tableSize; y++){\n                    var row = document.createElement(\"tr\");\n                    row.classList.add(\"field-row\");\n                    this.tableEl.append(row);\n                    for(var x = 0; x < this.tableSize; x++){\n                        var cell = document.createElement(\"td\");\n                        cell.classList.add(\"field-cell\");\n                        row.append(cell);\n                    }\n                }\n            }\n        },\n        {\n            key: \"start\",\n            value: function start() {\n                var _this = this;\n                this.score = 0;\n                this.gameOver = false;\n                this.hasWon = false;\n                this.matrix = new Array(this.tableSize).fill([]).map(function() {\n                    return new Array(_this.tableSize).fill(0);\n                });\n                this.messageLoseEl.classList.add(\"hidden\");\n                this.messageWinEl.classList.add(\"hidden\");\n                if (this.startButtonEl.classList.contains(\"start\")) {\n                    this.startButtonEl.classList.remove(\"start\");\n                    this.startButtonEl.classList.add(\"restart\");\n                    this.startButtonEl.textContent = \"Restart\";\n                    this.messageStartEl.classList.add(\"hidden\");\n                }\n                this.addNumber();\n                this.addNumber();\n                this.render();\n            }\n        },\n        {\n            key: \"getRandomNumber\",\n            value: function getRandomNumber() {\n                return Math.random() >= 0.9 ? 4 : 2;\n            }\n        },\n        {\n            key: \"getRandomCell\",\n            value: function getRandomCell() {\n                var freeCells = this.getFreeCells();\n                return freeCells[Math.floor(Math.random() * freeCells.length)];\n            }\n        },\n        {\n            key: \"getFreeCells\",\n            value: function getFreeCells() {\n                return this.matrix.reduce(function(freeCells, row, rowIndex) {\n                    row.forEach(function(val, colIndex) {\n                        return val === 0 && freeCells.push([\n                            rowIndex,\n                            colIndex\n                        ]);\n                    });\n                    return freeCells;\n                }, []);\n            }\n        },\n        {\n            key: \"addNumber\",\n            value: function addNumber() {\n                var _this_getRandomCell = _sliced_to_array(this.getRandomCell(), 2), y = _this_getRandomCell[0], x = _this_getRandomCell[1];\n                this.matrix[y][x] = this.getRandomNumber();\n                this.render();\n            }\n        },\n        {\n            key: \"canMove\",\n            value: function canMove() {\n                var freeCells = this.getFreeCells();\n                if (freeCells.length > 0) return true;\n                for(var y = 0; y < this.tableSize; y++)for(var x = 0; x < this.tableSize; x++){\n                    if (this.matrix[y][x + 1] && this.matrix[y][x] === this.matrix[y][x + 1] || this.matrix[y + 1] && this.matrix[y][x] === this.matrix[y + 1][x]) return true;\n                }\n                return false;\n            }\n        },\n        {\n            key: \"matrixShift\",\n            value: function matrixShift() {\n                var _this = this;\n                var emptyCells = new Array(this.tableSize).fill(0);\n                this.matrix = this.matrix.map(function(row) {\n                    return row.filter(function(el) {\n                        return el > 0;\n                    }).concat(emptyCells).slice(0, _this.tableSize);\n                });\n            }\n        },\n        {\n            key: \"matrixRotate\",\n            value: function matrixRotate(degree) {\n                var _this = this;\n                switch(degree){\n                    case 90:\n                    case -270:\n                        this.matrix = this.matrix.map(function(_, rowIndex) {\n                            return _this.matrix.map(function(row) {\n                                return row[rowIndex];\n                            }).reverse();\n                        });\n                        break;\n                    case 180:\n                    case -180:\n                        this.matrix = this.matrix.map(function(row) {\n                            return row.reverse();\n                        }).reverse();\n                        break;\n                    case 270:\n                    case -90:\n                        this.matrix = this.matrix.map(function(_, rowIndex) {\n                            return _this.matrix.map(function(row) {\n                                return _to_consumable_array(row).reverse()[rowIndex];\n                            });\n                        });\n                        break;\n                    case 0:\n                    case 360:\n                    case -360:\n                        return this.matrix;\n                    default:\n                        throw new Error(\"Degree must be one of 90, -90, 180, -180, 270, -270\");\n                }\n            }\n        },\n        {\n            key: \"handleMove\",\n            value: function handleMove(even) {\n                if (this.gameOver) return;\n                switch(even.key){\n                    case \"ArrowLeft\":\n                        this.merge();\n                        this.render();\n                        break;\n                    case \"ArrowDown\":\n                        this.matrixRotate(90);\n                        this.merge();\n                        this.matrixRotate(-90);\n                        this.render();\n                        break;\n                    case \"ArrowRight\":\n                        this.matrixRotate(180);\n                        this.merge();\n                        this.matrixRotate(-180);\n                        this.render();\n                        break;\n                    case \"ArrowUp\":\n                        this.matrixRotate(270);\n                        this.merge();\n                        this.matrixRotate(-270);\n                        this.render();\n                        break;\n                }\n            }\n        },\n        {\n            key: \"hasMatrixChanged\",\n            value: function hasMatrixChanged(matrixRef) {\n                return this.matrix.some(function(row, y) {\n                    return row.some(function(val, x) {\n                        return val !== matrixRef[y][x];\n                    });\n                });\n            }\n        },\n        {\n            key: \"merge\",\n            value: function merge() {\n                var matrixRef = this.matrix.map(function(row) {\n                    return row.slice();\n                });\n                for(var y = 0; y < this.tableSize; y++)for(var x = 0; x < this.tableSize - 1; x++){\n                    this.matrixShift();\n                    if (this.matrix[y][x] === this.matrix[y][x + 1]) {\n                        this.matrix[y][x] *= 2;\n                        this.matrix[y][x + 1] = 0;\n                        this.score += this.matrix[y][x];\n                    }\n                }\n                if (this.hasMatrixChanged(matrixRef)) this.addNumber();\n            }\n        },\n        {\n            key: \"render\",\n            value: function render() {\n                var _this = this;\n                var rows = this.tableEl.rows;\n                this.numberElements.forEach(function(el) {\n                    el.textContent = \"\";\n                    el.className = \"field-cell\";\n                });\n                this.numberElements = [];\n                this.matrix.forEach(function(arr, rowIndex) {\n                    arr.forEach(function(val, cellIndex) {\n                        if (val) {\n                            var field = rows[rowIndex].cells[cellIndex];\n                            field.textContent = val;\n                            field.classList.add(\"field-cell--\".concat(val));\n                            _this.numberElements.push(field);\n                            _this.scoreEl.textContent = _this.score;\n                        }\n                    });\n                });\n                if (this.matrix.some(function(row) {\n                    return row.some(function(el) {\n                        return el === 2048;\n                    });\n                }) && !this.hasWon) {\n                    this.messageWinEl.classList.remove(\"hidden\");\n                    this.hasWon = true;\n                    setTimeout(function() {\n                        _this.messageWinEl.classList.add(\"hidden\");\n                    }, 8000);\n                }\n                if (!this.canMove()) {\n                    this.messageLoseEl.classList.remove(\"hidden\");\n                    this.gameOver = true;\n                }\n            }\n        }\n    ]);\n    return Game;\n}();\nvar game = new Game();\ngame.init();\n\n//# sourceMappingURL=index.4732452a.js.map\n","'use strict';\n\nclass Game {\n  constructor(tableSize = 4) {\n    this.tableSize = tableSize;\n    this.numberElements = [];\n    this.handleMove = this.handleMove.bind(this);\n    this.start = this.start.bind(this);\n    this.initSelectors();\n    this.initListeners();\n  }\n\n  initSelectors() {\n    this.tableEl = document.querySelector('table');\n    this.scoreEl = document.querySelector('.game-score');\n    this.messageLoseEl = document.querySelector('.message-lose');\n    this.messageWinEl = document.querySelector('.message-win');\n    this.messageStartEl = document.querySelector('.message-start');\n    this.startButtonEl = document.querySelector('.button');\n  }\n\n  initListeners() {\n    window.addEventListener('keyup', this.handleMove);\n    this.startButtonEl.addEventListener('click', this.start);\n  }\n\n  init() {\n    for (let y = 0; y < this.tableSize; y++) {\n      const row = document.createElement('tr');\n\n      row.classList.add('field-row');\n      this.tableEl.append(row);\n\n      for (let x = 0; x < this.tableSize; x++) {\n        const cell = document.createElement('td');\n\n        cell.classList.add('field-cell');\n        row.append(cell);\n      }\n    }\n  }\n\n  start() {\n    this.score = 0;\n    this.gameOver = false;\n    this.hasWon = false;\n\n    this.matrix = new Array(this.tableSize)\n      .fill([])\n      .map(() => new Array(this.tableSize).fill(0));\n\n    this.messageLoseEl.classList.add('hidden');\n    this.messageWinEl.classList.add('hidden');\n\n    if (this.startButtonEl.classList.contains('start')) {\n      this.startButtonEl.classList.remove('start');\n      this.startButtonEl.classList.add('restart');\n      this.startButtonEl.textContent = 'Restart';\n      this.messageStartEl.classList.add('hidden');\n    }\n\n    this.addNumber();\n    this.addNumber();\n    this.render();\n  }\n\n  getRandomNumber() {\n    return Math.random() >= 0.9 ? 4 : 2;\n  }\n\n  getRandomCell() {\n    const freeCells = this.getFreeCells();\n\n    return freeCells[Math.floor(Math.random() * freeCells.length)];\n  }\n\n  getFreeCells() {\n    return this.matrix.reduce((freeCells, row, rowIndex) => {\n      row.forEach(\n        (val, colIndex) => val === 0 && freeCells.push([rowIndex, colIndex]),\n      );\n\n      return freeCells;\n    }, []);\n  }\n\n  addNumber() {\n    const [y, x] = this.getRandomCell();\n\n    this.matrix[y][x] = this.getRandomNumber();\n    this.render();\n  }\n\n  canMove() {\n    const freeCells = this.getFreeCells();\n\n    if (freeCells.length > 0) {\n      return true;\n    }\n\n    for (let y = 0; y < this.tableSize; y++) {\n      for (let x = 0; x < this.tableSize; x++) {\n        if (\n          (this.matrix[y][x + 1]\n            && this.matrix[y][x] === this.matrix[y][x + 1])\n          || (this.matrix[y + 1] && this.matrix[y][x] === this.matrix[y + 1][x])\n        ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  matrixShift() {\n    const emptyCells = new Array(this.tableSize).fill(0);\n\n    this.matrix = this.matrix.map((row) => {\n      return row\n        .filter((el) => el > 0)\n        .concat(emptyCells)\n        .slice(0, this.tableSize);\n    });\n  }\n\n  matrixRotate(degree) {\n    switch (degree) {\n      case 90:\n      case -270:\n        this.matrix = this.matrix.map((_, rowIndex) => {\n          return this.matrix.map((row) => row[rowIndex]).reverse();\n        });\n        break;\n\n      case 180:\n      case -180:\n        this.matrix = this.matrix.map((row) => row.reverse()).reverse();\n        break;\n\n      case 270:\n      case -90:\n        this.matrix = this.matrix.map((_, rowIndex) => {\n          return this.matrix.map((row) => [...row].reverse()[rowIndex]);\n        });\n        break;\n\n      case 0:\n      case 360:\n      case -360:\n        return this.matrix;\n\n      default:\n        throw new Error('Degree must be one of 90, -90, 180, -180, 270, -270');\n    }\n  }\n\n  handleMove(even) {\n    if (this.gameOver) {\n      return;\n    }\n\n    switch (even.key) {\n      case 'ArrowLeft':\n        this.merge();\n        this.render();\n        break;\n\n      case 'ArrowDown':\n        this.matrixRotate(90);\n        this.merge();\n        this.matrixRotate(-90);\n        this.render();\n        break;\n\n      case 'ArrowRight':\n        this.matrixRotate(180);\n        this.merge();\n        this.matrixRotate(-180);\n        this.render();\n        break;\n\n      case 'ArrowUp':\n        this.matrixRotate(270);\n        this.merge();\n        this.matrixRotate(-270);\n        this.render();\n        break;\n    }\n  }\n\n  hasMatrixChanged(matrixRef) {\n    return this.matrix.some((row, y) => {\n      return row.some((val, x) => val !== matrixRef[y][x]);\n    });\n  }\n\n  merge() {\n    const matrixRef = this.matrix.map((row) => row.slice());\n\n    for (let y = 0; y < this.tableSize; y++) {\n      for (let x = 0; x < this.tableSize - 1; x++) {\n        this.matrixShift();\n\n        if (this.matrix[y][x] === this.matrix[y][x + 1]) {\n          this.matrix[y][x] *= 2;\n          this.matrix[y][x + 1] = 0;\n          this.score += this.matrix[y][x];\n        }\n      }\n    }\n\n    if (this.hasMatrixChanged(matrixRef)) {\n      this.addNumber();\n    }\n  }\n\n  render() {\n    const { rows } = this.tableEl;\n\n    this.numberElements.forEach((el) => {\n      el.textContent = '';\n      el.className = 'field-cell';\n    });\n    this.numberElements = [];\n\n    this.matrix.forEach((arr, rowIndex) => {\n      arr.forEach((val, cellIndex) => {\n        if (val) {\n          const field = rows[rowIndex].cells[cellIndex];\n\n          field.textContent = val;\n          field.classList.add(`field-cell--${val}`);\n          this.numberElements.push(field);\n          this.scoreEl.textContent = this.score;\n        }\n      });\n    });\n\n    if (\n      this.matrix.some((row) => row.some((el) => el === 2048))\n      && !this.hasWon\n    ) {\n      this.messageWinEl.classList.remove('hidden');\n      this.hasWon = true;\n\n      setTimeout(() => {\n        this.messageWinEl.classList.add('hidden');\n      }, 8000);\n    }\n\n    if (!this.canMove()) {\n      this.messageLoseEl.classList.remove('hidden');\n      this.gameOver = true;\n    }\n  }\n}\n\nconst game = new Game();\n\ngame.init();\n"],"names":["_array_like_to_array","arr","len","length","i","arr2","Array","_unsupported_iterable_to_array","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","from","test","game","protoProps","Game","tableSize","arguments","_class_call_check","instance","Constructor","TypeError","numberElements","handleMove","bind","start","initSelectors","initListeners","key","value","tableEl","document","querySelector","scoreEl","messageLoseEl","messageWinEl","messageStartEl","startButtonEl","window","addEventListener","y","row","createElement","classList","add","append","x","cell","_this","score","gameOver","hasWon","matrix","fill","map","contains","remove","textContent","addNumber","render","Math","random","freeCells","getFreeCells","floor","reduce","rowIndex","forEach","val","colIndex","push","_this_getRandomCell","_array_with_holes","isArray","getRandomCell","_iterable_to_array_limit","_s","_e","_i","Symbol","iterator","_arr","_n","_d","next","done","err","_non_iterable_rest","getRandomNumber","emptyCells","filter","el","concat","degree","_","reverse","_to_consumable_array","_array_without_holes","_iterable_to_array","iter","_non_iterable_spread","Error","even","merge","matrixRotate","matrixRef","some","matrixShift","hasMatrixChanged","rows","className","cellIndex","field","cells","setTimeout","canMove","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","init"],"version":3,"file":"index.4732452a.js.map"}